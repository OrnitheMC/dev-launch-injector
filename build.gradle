plugins {
    id 'java'
    id 'maven-publish'
    id 'checkstyle'
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

group = 'net.ornithemc'
archivesBaseName = 'dev-launch-injector'
version = '0.1.0'

def ENV = System.getenv()
version = version + "+" + (ENV.BUILD_NUMBER ? ("build." + ENV.BUILD_NUMBER) : "local")

sourceSets {
    main {
        java.srcDirs = ['src']
    }
}

repositories {
	mavenCentral()
}

checkstyle {
	configFile = file("checkstyle.xml")
	toolVersion = '8.25'
}

publishing {
	publications {
		mavenJava(MavenPublication) {
			artifact(jar)
		}
	}

	repositories {
		if (ENV.MAVEN_URL) {
			maven {
				url = ENV.MAVEN_URL

				credentials {
					username = ENV.MAVEN_USERNAME
					password = ENV.MAVEN_PASSWORD
				}
			}
		}
	}
}
